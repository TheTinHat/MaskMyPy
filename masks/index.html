
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Geographic Masking Python Package">
      
      
      
        <link rel="canonical" href="https://thetinhat.github.io/MaskMyPy/masks/">
      
      
        <link rel="prev" href="../atlas/">
      
      
        <link rel="next" href="../tools/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Masks - MaskMyPy Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#donut-masking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MaskMyPy Documentation" class="md-header__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MaskMyPy Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Masks
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MaskMyPy Documentation" class="md-nav__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    MaskMyPy Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analysis
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../atlas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Atlas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Masks
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Masks
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#donut-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Donut Masking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Donut Masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.donut.donut" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;donut
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#street-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Street Masking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#location-swapping" class="md-nav__link">
    <span class="md-ellipsis">
      Location Swapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Location Swapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.locationswap.locationswap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;locationswap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voronoi-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Voronoi Masking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Voronoi Masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.voronoi.voronoi" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;voronoi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#donut-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Donut Masking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Donut Masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.donut.donut" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;donut
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#street-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Street Masking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#location-swapping" class="md-nav__link">
    <span class="md-ellipsis">
      Location Swapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Location Swapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.locationswap.locationswap" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;locationswap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voronoi-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Voronoi Masking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Voronoi Masking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.voronoi.voronoi" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;voronoi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Masks</h1>

<h2 id="donut-masking">Donut Masking<a class="headerlink" href="#donut-masking" title="Permanent link">&para;</a></h2>
<!-- At its most basic, donut masking is an anonymization technique that works by randomly displacing each point between a specified minimum and maximum distance, as pictured below. This makes it a stronger form of random perturbation, which uses no minimum distance and thus runs the risk of insufficiently anonymizing points. MaskMyPy offers donut masking using the `maskmypy.donut()` masking function. -->
<!---->
<!-- ![Donut masking diagram](assets/donutmasking.png) -->



<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="maskmypy.donut.donut" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">donut</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distribution</span><span class="o">=</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">snap_to_streets</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#maskmypy.donut.donut" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Apply donut masking to a GeoDataFrame, randomly displacing points between a minimum and
maximum distance. Advantages of this mask is speed and simplicity, though it does not
handle highly varied population densities well.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">maskmypy</span><span class="w"> </span><span class="kn">import</span> <span class="n">donut</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">donut</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">gdf</span><span class="o">=</span><span class="n">sensitive_points</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="nb">min</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing sensitive points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum distance to displace points. Unit must match that of the <code>gdf</code> CRS.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>high</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum displacement to displace points. Unit must match that of the <code>gdf</code> CRS.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>container</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A  GeoDataFrame containing polygons within which intersecting sensitive points should
remain after masking. This works by masking a point, checking if it intersects
the same polygon prior to masking, and retrying until it does. Useful for preserving
statistical relationships, such as census tract, or to ensure that points are not
displaced into impossible locations, such as the ocean. CRS must match that of <code>gdf</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distribution</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The distribution used to determine masking distances. <code>uniform</code> provides
a flat distribution where any value between the minimum and maximum distance is
equally likely to be selected. <code>areal</code> is more likely to select distances that are
further away. The <code>gaussian</code> distribution uses a normal distribution, where values
towards the middle of the range are most likely to be selected. Note that gaussian
distribution has a small chance of selecting values beyond the defined minimum and
maximum.</p>
              </div>
            </td>
            <td>
                  <code>&#39;uniform&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Used to seed the random number generator so that masked datasets are reproducible.
Randomly generated if left undefined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>snap_to_streets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, points are snapped to the nearest node on the OSM street network after masking.
This can reduce the chance of false-attribution.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A GeoDataFrame containing masked points.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>maskmypy/masks/donut.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span><span class="w"> </span><span class="nf">donut</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="n">gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="n">low</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="n">high</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="n">container</span><span class="p">:</span> <span class="n">GeoDataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>    <span class="n">distribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;uniform&quot;</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="n">snap_to_streets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    Apply donut masking to a GeoDataFrame, randomly displacing points between a minimum and</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    maximum distance. Advantages of this mask is speed and simplicity, though it does not</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">    handle highly varied population densities well.</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    Example</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    -------</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    from maskmypy import donut</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    masked = donut(</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">        gdf=sensitive_points,</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        min=100,</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        max=1000</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    )</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    ```</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    gdf : GeoDataFrame</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        GeoDataFrame containing sensitive points.</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    low : float</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        Minimum distance to displace points. Unit must match that of the `gdf` CRS.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    high : float</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        Maximum displacement to displace points. Unit must match that of the `gdf` CRS.</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    container : GeoDataFrame</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">        A  GeoDataFrame containing polygons within which intersecting sensitive points should</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">        remain after masking. This works by masking a point, checking if it intersects</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        the same polygon prior to masking, and retrying until it does. Useful for preserving</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        statistical relationships, such as census tract, or to ensure that points are not</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">        displaced into impossible locations, such as the ocean. CRS must match that of `gdf`.</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">    distribution : str</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        The distribution used to determine masking distances. `uniform` provides</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        a flat distribution where any value between the minimum and maximum distance is</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        equally likely to be selected. `areal` is more likely to select distances that are</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        further away. The `gaussian` distribution uses a normal distribution, where values</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">        towards the middle of the range are most likely to be selected. Note that gaussian</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        distribution has a small chance of selecting values beyond the defined minimum and</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        maximum.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    seed : int</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        Used to seed the random number generator so that masked datasets are reproducible.</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        Randomly generated if left undefined.</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">    snap_to_streets : bool</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        If True, points are snapped to the nearest node on the OSM street network after masking.</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        This can reduce the chance of false-attribution.</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    -------</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">    GeoDataFrame</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">        A GeoDataFrame containing masked points.</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="n">_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">_validate_donut</span><span class="p">(</span><span class="n">_gdf</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">container</span><span class="p">)</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="n">seed</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">gen_seed</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">seed</span> <span class="k">else</span> <span class="n">seed</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="n">args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;snap_to_streets&quot;</span><span class="p">]</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;gdf&quot;</span><span class="p">]</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">_Donut</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">if</span> <span class="n">snap_to_streets</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">snap_to_streets</span><span class="p">(</span><span class="n">masked_gdf</span><span class="p">)</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="k">return</span> <span class="n">masked_gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="street-masking">Street Masking<a class="headerlink" href="#street-masking" title="Permanent link">&para;</a></h2>
<!-- Street masking automatically downloads OpenStreetMap data and uses it to geographically mask your secret points. It provides some of the advantages of population-based masks without requiring the user to hunt down any additional data. It works by first downloading the road network, snapping each secret point to the nearest node on the network (e.g. an intersection or dead end), and then calculating the average network-distance between that node and a pool of the closest _n_ nodes. Note that _n_ is randomly determined for each point from a specified range between `min_depth` and `max_depth`. This average distance is used as the target displacement distance. Finally, it selects a node from the pool whose network-distance from the starting node is closest to the target displacement distance. -->
<!---->
<!-- You can read more about street masking in [this peer reviewed article](https://ij-healthgeographics.biomedcentral.com/articles/10.1186/s12942-020-00219-z). -->
<!---->
<!-- ![Street masking diagram](assets/streetmasking.png) -->
<!-- _(Note: this diagram is slightly dated as street masking now includes a randomization element. Specifically, depth values are now provided as a range within which a value is selected at random for each point. This makes it more difficult for an attacker to re-identify any given masked point.)_ -->



<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Apply street masking to a GeoDataFrame, displacing points along the OpenStreetMap street
network. This helps account for variations in population density, and reduces the likelihood
of false attribution as points are always displaced to the street network. Each point is
snapped to the nearest node on the network, then displaced along the surround network between
<code>low</code> and <code>high</code> nodes away.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">maskmypy</span><span class="w"> </span><span class="kn">import</span> <span class="n">street</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">street</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">gdf</span><span class="o">=</span><span class="n">sensitive_points</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">low</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">high</span><span class="o">=</span><span class="mi">30</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">)</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing sensitive points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum number of nodes along the OSM street network to traverse.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>high</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of nodes along the OSM street network to traverse.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_length</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When locating the closest node to each point on the street network, MaskMyPy verifies
that its immediate neighbours are no more than <code>max_length</code> away, in meters. This prevents
extremely large masking distances, such as those caused by long highways.</p>
              </div>
            </td>
            <td>
                  <code>1000</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Used to seed the random number generator so that masked datasets are reproducible.
Randomly generated if left undefined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>padding</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>OSM network data is retrieved based on the bounding box of the sensitive GeoDataFrame.
Padding is used to expand this bounding box slightly to reduce unwanted edge-effects.
A value of <code>0.2</code> would add 20% of the x and y extent to <em>each side</em> of the bounding box.</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A GeoDataFrame containing masked points.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>maskmypy/masks/street.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">street</span><span class="p">(</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="n">gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="n">low</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="n">high</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="n">max_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">padding</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    Apply street masking to a GeoDataFrame, displacing points along the OpenStreetMap street</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    network. This helps account for variations in population density, and reduces the likelihood</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    of false attribution as points are always displaced to the street network. Each point is</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">    snapped to the nearest node on the network, then displaced along the surround network between</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    `low` and `high` nodes away.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    Example</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    -------</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    from maskmypy import street</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    masked = street(</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        gdf=sensitive_points,</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">        low=20,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        high=30</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    )</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    ```</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    gdf : GeoDataFrame</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">        GeoDataFrame containing sensitive points.</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    low : int</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        Minimum number of nodes along the OSM street network to traverse.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    high : int</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">        Maximum number of nodes along the OSM street network to traverse.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    max_length : float</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        When locating the closest node to each point on the street network, MaskMyPy verifies</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        that its immediate neighbours are no more than `max_length` away, in meters. This prevents</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        extremely large masking distances, such as those caused by long highways.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    seed : int</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        Used to seed the random number generator so that masked datasets are reproducible.</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        Randomly generated if left undefined.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    padding : float</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        OSM network data is retrieved based on the bounding box of the sensitive GeoDataFrame.</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        Padding is used to expand this bounding box slightly to reduce unwanted edge-effects.</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        A value of `0.2` would add 20% of the x and y extent to *each side* of the bounding box.</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    -------</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    GeoDataFrame</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        A GeoDataFrame containing masked points.</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="n">_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">_validate_street</span><span class="p">(</span><span class="n">_gdf</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">seed</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">gen_seed</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">seed</span> <span class="k">else</span> <span class="n">seed</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="n">args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;gdf&quot;</span><span class="p">]</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">_Street</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="k">return</span> <span class="n">masked_gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">




    <div class="doc doc-contents first">

        <p>Iteratively applies street masking to a GeoDataFrame, incrementally increasing the low/high node values
until a given k-satisfaction threshold is reached. This provides a much more robust privacy
promise, but requires population data.</p>
<p>For instance, if <code>min_k=30</code> and <code>suppression=0.99</code>, then street masking will be repeated with 
progressively higher values until 99% of points have a k-anonymity of at least 30. 
Suppressed points are displaced to the center of the point distribution and labeled as such 
in a <code>SUPPRESSED</code> column.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">maskmypy</span><span class="w"> </span><span class="kn">import</span> <span class="n">street_k</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">street</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">gdf</span><span class="o">=</span><span class="n">sensitive_points</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">population_gdf</span><span class="o">=</span><span class="n">addresses</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">start</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">spread</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">min_k</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">suppression</span><span class="o">=</span><span class="mf">0.95</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="p">)</span>
</code></pre></div>
<p>This will perform street masking starting with <code>street(gdf, low=20, high=25)</code> and slowly increment
values until 95% of points achieve a k-anonymity of at least 30, with the rest being suppressed.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing sensitive points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>population_gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A GeoDataFrame containing either address points or polygons with a population column
(see <code>population_column</code>). Used to calculate k-anonymity metrics. Note that
address points tend to provide more accurate results.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>population_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a polygon-based <code>population_gdf</code> is provided, the name of the column containing
population counts.</p>
              </div>
            </td>
            <td>
                  <code>&#39;pop&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>min_k</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Points that do not reach this k-anonymity value will be suppressed.</p>
              </div>
            </td>
            <td>
                  <code>30</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial value of <code>low</code> in <code>street()</code>.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stop</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum value of <code>low</code> in <code>street()</code> before exiting. Used to prevent endless searches.</p>
              </div>
            </td>
            <td>
                  <code>60</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>spread</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Used to calculate the <code>high</code> value in <code>street()</code>. High = <code>start + spread</code>.</p>
              </div>
            </td>
            <td>
                  <code>2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>increment</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Amounted incremented in each iteration until <code>min_k</code> is met</p>
              </div>
            </td>
            <td>
                  <code>2</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>suppression</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Percent of points that must satisfy <code>min_k</code>.</p>
              </div>
            </td>
            <td>
                  <code>0.99</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_length</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When locating the closest node to each point on the street network, MaskMyPy verifies
that its immediate neighbours are no more than <code>max_length</code> away, in meters. This prevents
extremely large masking distances, such as those caused by long highways.</p>
              </div>
            </td>
            <td>
                  <code>1000</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Used to seed the random number generator so that masked datasets are reproducible.
Randomly generated if left undefined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>padding</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>OSM network data is retrieved based on the bounding box of the sensitive GeoDataFrame.
Padding is used to expand this bounding box slightly to reduce unwanted edge-effects.
A value of <code>0.2</code> would add 20% of the x and y extent to <em>each side</em> of the bounding box.</p>
              </div>
            </td>
            <td>
                  <code>0.2</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A GeoDataFrame containing masked points.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>maskmypy/masks/street.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="k">def</span><span class="w"> </span><span class="nf">street_k</span><span class="p">(</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="n">gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="n">population_gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">population_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pop&quot;</span><span class="p">,</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="n">min_k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="n">spread</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="n">increment</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">suppression</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.99</span><span class="p">,</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="n">max_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="n">padding</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">    Iteratively applies street masking to a GeoDataFrame, incrementally increasing the low/high node values</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">    until a given k-satisfaction threshold is reached. This provides a much more robust privacy</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">    promise, but requires population data.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    For instance, if `min_k=30` and `suppression=0.99`, then street masking will be repeated with </span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">    progressively higher values until 99% of points have a k-anonymity of at least 30. </span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    Suppressed points are displaced to the center of the point distribution and labeled as such </span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">    in a `SUPPRESSED` column.</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    Example</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="sd">    -------</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="sd">    from maskmypy import street_k</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">    masked = street(</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        gdf=sensitive_points,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">        population_gdf=addresses,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        start=20,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">        spread=5,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        min_k=30,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        suppression=0.95</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    )</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    ```</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    This will perform street masking starting with `street(gdf, low=20, high=25)` and slowly increment</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">    values until 95% of points achieve a k-anonymity of at least 30, with the rest being suppressed.</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">    gdf : GeoDataFrame</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">        GeoDataFrame containing sensitive points.</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">    population_gdf : GeoDataFrame</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        A GeoDataFrame containing either address points or polygons with a population column</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        (see `population_column`). Used to calculate k-anonymity metrics. Note that</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        address points tend to provide more accurate results.</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    population_column : str</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">        If a polygon-based `population_gdf` is provided, the name of the column containing</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">        population counts.</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    min_k: int</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        Points that do not reach this k-anonymity value will be suppressed.</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">    start: int</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        Initial value of `low` in `street()`.</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">    stop: int</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">        Maximum value of `low` in `street()` before exiting. Used to prevent endless searches.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    spread: int</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        Used to calculate the `high` value in `street()`. High = `start + spread`.</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">    increment: int</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">        Amounted incremented in each iteration until `min_k` is met</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">    suppression: float</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">        Percent of points that must satisfy `min_k`.</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">    max_length : float</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        When locating the closest node to each point on the street network, MaskMyPy verifies</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">        that its immediate neighbours are no more than `max_length` away, in meters. This prevents</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">        extremely large masking distances, such as those caused by long highways.</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    seed : int</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">        Used to seed the random number generator so that masked datasets are reproducible.</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">        Randomly generated if left undefined.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    padding : float</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">        OSM network data is retrieved based on the bounding box of the sensitive GeoDataFrame.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">        Padding is used to expand this bounding box slightly to reduce unwanted edge-effects.</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        A value of `0.2` would add 20% of the x and y extent to *each side* of the bounding box.</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">    -------</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    GeoDataFrame</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="sd">        A GeoDataFrame containing masked points.</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="n">k_sat</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="k">while</span> <span class="n">k_sat</span> <span class="o">&lt;</span> <span class="n">suppression</span><span class="p">:</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="k">if</span> <span class="n">start</span> <span class="o">&gt;</span> <span class="n">stop</span><span class="p">:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>                <span class="s2">&quot;Reached maximum network depth (stop value). Unable to achieve min_k.&quot;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="p">)</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="n">masked</span> <span class="o">=</span> <span class="n">street</span><span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="n">gdf</span><span class="o">=</span><span class="n">gdf</span><span class="p">,</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="n">low</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="n">high</span><span class="o">=</span><span class="n">start</span> <span class="o">+</span> <span class="n">spread</span><span class="p">,</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="n">max_length</span><span class="o">=</span><span class="n">max_length</span><span class="p">,</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>            <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">,</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="p">)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="n">masked_k</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">k_anonymity</span><span class="p">(</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="n">gdf</span><span class="p">,</span> <span class="n">masked</span><span class="p">,</span> <span class="n">population_gdf</span><span class="o">=</span><span class="n">population_gdf</span><span class="p">,</span> <span class="n">population_column</span><span class="o">=</span><span class="n">population_column</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="p">)</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="n">k_sat</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">k_satisfaction</span><span class="p">(</span><span class="n">masked_k</span><span class="p">,</span> <span class="n">min_k</span><span class="o">=</span><span class="n">min_k</span><span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="k">if</span> <span class="n">k_sat</span> <span class="o">&gt;=</span> <span class="n">suppression</span><span class="p">:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>            <span class="n">masked_k</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">masked_k</span><span class="p">,</span> <span class="n">min_k</span><span class="o">=</span><span class="n">min_k</span><span class="p">)</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>        <span class="n">start</span> <span class="o">+=</span> <span class="n">increment</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="k">return</span> <span class="n">masked_k</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />
<h2 id="location-swapping">Location Swapping<a class="headerlink" href="#location-swapping" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="maskmypy.locationswap.locationswap" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">locationswap</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">snap_to_streets</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#maskmypy.locationswap.locationswap" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Applies location swapping to a GeoDataFrame, displacing points to a randomly selected address
that is between a minimum and maximum distance away from the original point. While address
data is the most common data type used to provide eligible swap locations, other point-based
datasets may be used.</p>
<p>Note: If a sensitive point has no address points within range, the point is displaced to (0,0).</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">maskmypy</span><span class="w"> </span><span class="kn">import</span> <span class="n">locationswap</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">locationswap</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">gdf</span><span class="o">=</span><span class="n">sensitive_points</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">low</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">high</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">address</span><span class="o">=</span><span class="n">address_points</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">)</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing sensitive points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>low</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum distance to displace points. Unit must match that of the <code>gdf</code> CRS.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>high</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum displacement to displace points. Unit must match that of the <code>gdf</code> CRS.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>address</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing points that sensitive locations may be swapped to.
While addresses are most common, other point-based data may be used as well.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>seed</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Used to seed the random number generator so that masked datasets are reproducible.
Randomly generated if left undefined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>snap_to_streets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, points are snapped to the nearest node on the OSM street network after masking.
This can reduce the chance of false-attribution.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>maskmypy/masks/locationswap.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">locationswap</span><span class="p">(</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="n">gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="n">low</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="n">high</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="n">address</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>    <span class="n">snap_to_streets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="p">):</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    Applies location swapping to a GeoDataFrame, displacing points to a randomly selected address</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    that is between a minimum and maximum distance away from the original point. While address</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    data is the most common data type used to provide eligible swap locations, other point-based</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    datasets may be used.</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">    Note: If a sensitive point has no address points within range, the point is displaced to (0,0).</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    Example</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    -------</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">    from maskmypy import locationswap</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">    masked = locationswap(</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        gdf=sensitive_points,</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        low=50,</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">        high=500,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">        address=address_points</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    )</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    ```</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    gdf : GeoDataFrame</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        GeoDataFrame containing sensitive points.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    low : float</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        Minimum distance to displace points. Unit must match that of the `gdf` CRS.</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    high : float</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">        Maximum displacement to displace points. Unit must match that of the `gdf` CRS.</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    address : GeoDataFrame</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        GeoDataFrame containing points that sensitive locations may be swapped to.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        While addresses are most common, other point-based data may be used as well.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    seed : int</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">        Used to seed the random number generator so that masked datasets are reproducible.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        Randomly generated if left undefined.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">    snap_to_streets : bool</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        If True, points are snapped to the nearest node on the OSM street network after masking.</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        This can reduce the chance of false-attribution.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="n">_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="n">_validate_locationswap</span><span class="p">(</span><span class="n">_gdf</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">address</span><span class="p">)</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="n">seed</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">gen_seed</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">seed</span> <span class="k">else</span> <span class="n">seed</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="n">args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;snap_to_streets&quot;</span><span class="p">]</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;gdf&quot;</span><span class="p">]</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">mask</span> <span class="o">=</span> <span class="n">_LocationSwap</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">_unmasked_points</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">_mark_unmasked_points</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">masked_gdf</span><span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">if</span> <span class="n">snap_to_streets</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">snap_to_streets</span><span class="p">(</span><span class="n">masked_gdf</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">return</span> <span class="n">masked_gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />
<h2 id="voronoi-masking">Voronoi Masking<a class="headerlink" href="#voronoi-masking" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="maskmypy.voronoi.voronoi" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">voronoi</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">snap_to_streets</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#maskmypy.voronoi.voronoi" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Apply voronoi masking to a GeoDataFrame, displacing points to the nearest edges of a vornoi
diagram. Note: because voronoi masking lacks any level of randomization, snapping to streets
is recommended for this mask to provide another level of obfuscation.</p>


<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">maskmypy</span><span class="w"> </span><span class="kn">import</span> <span class="n">voronoi</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">voronoi</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">gdf</span><span class="o">=</span><span class="n">sensitive_points</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">snap_to_streets</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">)</span>
</code></pre></div>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>gdf</code>
            </td>
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>GeoDataFrame containing sensitive points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>snap_to_streets</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, points are snapped to the nearest node on the OSM street network after masking.
This can reduce the chance of false-attribution.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A GeoDataFrame containing masked points.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>maskmypy/masks/voronoi.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span><span class="w"> </span><span class="nf">voronoi</span><span class="p">(</span><span class="n">gdf</span><span class="p">:</span> <span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">snap_to_streets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoDataFrame</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Apply voronoi masking to a GeoDataFrame, displacing points to the nearest edges of a vornoi</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    diagram. Note: because voronoi masking lacks any level of randomization, snapping to streets</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    is recommended for this mask to provide another level of obfuscation.</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    Example</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    -------</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    ```python</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    from maskmypy import voronoi</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    masked = voronoi(</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">        gdf=sensitive_points,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">        snap_to_streets=True</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">    )</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    ```</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    Parameters</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">    ----------</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">    gdf : GeoDataFrame</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">        GeoDataFrame containing sensitive points.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">    snap_to_streets : bool</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        If True, points are snapped to the nearest node on the OSM street network after masking.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        This can reduce the chance of false-attribution.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    Returns</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    -------</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    GeoDataFrame</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        A GeoDataFrame containing masked points.</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="n">_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">_validate_voronoi</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="n">args</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;snap_to_streets&quot;</span><span class="p">]</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;gdf&quot;</span><span class="p">]</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">_Voronoi</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="k">if</span> <span class="n">snap_to_streets</span><span class="p">:</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="n">masked_gdf</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">snap_to_streets</span><span class="p">(</span><span class="n">masked_gdf</span><span class="p">)</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="k">return</span> <span class="n">masked_gdf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 23, 2025 12:26:47 PDT">October 23, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>