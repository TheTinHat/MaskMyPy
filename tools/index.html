
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Geographic Masking Python Package">
      
      
      
        <link rel="canonical" href="https://thetinhat.github.io/MaskMyPy/tools/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Evaluation Tools - MaskMyPy Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#k-anonymity" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MaskMyPy Documentation" class="md-header__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MaskMyPy Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Evaluation Tools
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MaskMyPy Documentation" class="md-nav__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    MaskMyPy Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../donut/" class="md-nav__link">
        Donut Masking
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../street/" class="md-nav__link">
        Street Masking
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Evaluation Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Evaluation Tools
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#k-anonymity" class="md-nav__link">
    K-Anonymity
  </a>
  
    <nav class="md-nav" aria-label="K-Anonymity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.estimate_k" class="md-nav__link">
    maskmypy.tools.estimate_k
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.calculate_k" class="md-nav__link">
    maskmypy.tools.calculate_k
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#displacement-distance" class="md-nav__link">
    Displacement Distance
  </a>
  
    <nav class="md-nav" aria-label="Displacement Distance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.displacement" class="md-nav__link">
    maskmypy.tools.displacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.map_displacement" class="md-nav__link">
    maskmypy.tools.map_displacement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shortcut-evaluation-using-run" class="md-nav__link">
    Shortcut: Evaluation Using .run()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#k-anonymity" class="md-nav__link">
    K-Anonymity
  </a>
  
    <nav class="md-nav" aria-label="K-Anonymity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.estimate_k" class="md-nav__link">
    maskmypy.tools.estimate_k
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.calculate_k" class="md-nav__link">
    maskmypy.tools.calculate_k
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#displacement-distance" class="md-nav__link">
    Displacement Distance
  </a>
  
    <nav class="md-nav" aria-label="Displacement Distance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.displacement" class="md-nav__link">
    maskmypy.tools.displacement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.tools.map_displacement" class="md-nav__link">
    maskmypy.tools.map_displacement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shortcut-evaluation-using-run" class="md-nav__link">
    Shortcut: Evaluation Using .run()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Evaluation Tools</h1>

<p><strong>Warning</strong>: Do not release datasets containing displacement distances or k-anonymity values. These are only to assist the person masking the data. Releasing such values may compromise privacy and aid attackers seeking to re-identify point locations. Always remove these columns before sharing the data.</p>
<h2 id="k-anonymity">K-Anonymity<a class="headerlink" href="#k-anonymity" title="Permanent link">&para;</a></h2>
<p>Maskmypy is able to calculate the k-anonymity of each point after masking. Two methods are available for this: <a href="#maskmypy.tools.estimate_k"><code>estimate_k</code></a> and <a href="#maskmypy.tools.calculate_k"><code>calculate_k</code></a>. Estimates of k-anonymity are inferred from population data, and assume a homogeneously distributed population within each population (i.e. census) polygon. Address-based k-anonymity is more accurate and uses actual address data to calculate k-anonymity.</p>
<div class="func-heading">maskmypy.tools.estimate_k(secret, mask, population)</div>


<div class="doc doc-object doc-function">


<a id="maskmypy.tools.estimate_k"></a>
  <div class="doc doc-contents first">
  
      <p>Estimate the k-anonymity of each anonymized point based on surrounding population density.
Note that unlike in <code>Donut_K</code>, neighboring polygons will be disaggregated and included to more
accurately estimate k-anonymity. Typically less accurate the <code>calculate_k</code>.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret points prior to masking.</p>
      </li>
      <li class="field-body">
        <b>mask</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Points after masking</p>
      </li>
      <li class="field-body">
        <b>population</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>A polygon layer with a column describing population count.</p>
      </li>
      <li class="field-body">
        <b>pop_col</b>
            (<code>str, optional</code>)
        – <p>The name of the population count column in the population polygon layer. Default: <code>pop</code>.</p>
      </li>
  </ul>

  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
        – <p>A GeoDataFrame with a <code>k_est</code> column describing k-anonymity.</p>
      </li>
  </ul>

  </div>

</div><hr />
<div class="func-heading">maskmypy.tools.calculate_k(secret, mask, address)</div>


<div class="doc doc-object doc-function">


<a id="maskmypy.tools.calculate_k"></a>
  <div class="doc doc-contents first">
  
      <p>Calculate the k-anonymity of each anonymized point based on surrounding address points.
Typically more accurate the <code>estimate_k</code>.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret points prior to masking.</p>
      </li>
      <li class="field-body">
        <b>mask</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Points after masking</p>
      </li>
      <li class="field-body">
        <b>address</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing address points.</p>
      </li>
  </ul>

  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
        – <p>A GeoDataFrame with a <code>k_calc</code> column describing k-anonymity.</p>
      </li>
  </ul>

  </div>

</div><h2 id="displacement-distance">Displacement Distance<a class="headerlink" href="#displacement-distance" title="Permanent link">&para;</a></h2>
<p>Displacement distance refers to the distance that each point is moved from its original location during anonymization. They are helpful insofar as they allow you to assess how much your data has been distorted by the masking process, both in terms of too much or too little. For instance, you may find that one point was only moved 6 meters, which doesn't protect privacy much at all. Alternatively, you may find that some points were displaced too far, say 6000 meters. MaskMyPy can easily calculate the displacement distance of masked data as well as generate a quick map of displacement distances to help you visually inspect the anonymization results.</p>
<div class="func-heading">maskmypy.tools.displacement(secret, mask)</div>


<div class="doc doc-object doc-function">


<a id="maskmypy.tools.displacement"></a>
  <div class="doc doc-contents first">
  
      <p>Calculates the displacement distance between secret and masked points.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret points prior to masking.</p>
      </li>
      <li class="field-body">
        <b>mask</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Points after masking</p>
      </li>
      <li class="field-body">
        <b>colname</b>
            (<code>str, optional</code>)
        – <p>Name for the output displacement distance column. Default: <code>_distance</code>.</p>
      </li>
  </ul>

  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
        – <p>A GeoDataFrame with a column describing displacement distances</p>
      </li>
  </ul>

  </div>

</div><hr />
<div class="func-heading">maskmypy.tools.map_displacement(secret, mask)</div>


<div class="doc doc-object doc-function">


<a id="maskmypy.tools.map_displacement"></a>
  <div class="doc doc-contents first">
  
      <p>Creates a map visualizing the displacement of each point between its
original and masked location.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret points prior to masking.</p>
      </li>
      <li class="field-body">
        <b>mask</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Points after masking</p>
      </li>
      <li class="field-body">
        <b>filename</b>
            (<code>str, optional</code>)
        – <p>If specified, saves the output map to a file.</p>
      </li>
      <li class="field-body">
        <b>address</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing address points.</p>
      </li>
  </ul>

  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code>matplotlib.<span title="matplotlib.pyplot">pyplot</span>.<span title="matplotlib.pyplot.plt">plt</span></code>
        – <p>A plot depicting secret and masked points connected by lines.</p>
      </li>
  </ul>

  </div>

</div><hr />
<h2 id="shortcut-evaluation-using-run">Shortcut: Evaluation Using <code>.run()</code><a class="headerlink" href="#shortcut-evaluation-using-run" title="Permanent link">&para;</a></h2>
<p>For convenience, several evaluation tools can be quickly executed by adding flags to the <code>.run()</code> method of each masking class. Here is the docstring for <code>.run()</code>:</p>
<hr />


<div class="doc doc-object doc-function">


<a id="maskmypy.mask.Mask.run"></a>
  <div class="doc doc-contents first">
  
      <p>Run the masking procedure to anonymize secret points.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>displacement</b>
            (<code>bool, optional</code>)
        – <p>If <code>True</code>, add a <code>distance</code> column containing the displacement distance.</p>
      </li>
      <li class="field-body">
        <b>estimate_k</b>
            (<code>bool, optional</code>)
        – <p>If <code>True</code>, estimate the k-anonymity of each anonymized point based on surrounding
population density. Requires a population layer to be loaded into the masking object.</p>
      </li>
      <li class="field-body">
        <b>calculate_k</b>
            (<code>bool, optional</code>)
        – <p>If <code>True</code>, calculate the k-anonymity of each anonymized point based on nearby address
points. Requires an address layer to be loaded into the masking class.</p>
      </li>
      <li class="field-body">
        <b>map_displacement</b>
            (<code>bool, optional</code>)
        – <p>If <code>True</code>, output a file called <code>displacement_map.png</code> that visualizes displacement
distance between secret and masked points.</p>
      </li>
  </ul>

  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>
        – <p>A GeoDataFrame of anonymized points.</p>
      </li>
  </ul>

  </div>

</div><hr />

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 4, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../street/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Street Masking" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Street Masking
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>