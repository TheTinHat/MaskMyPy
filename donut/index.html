
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Geographic Masking Python Package">
      
      
      
        <link rel="canonical" href="https://thetinhat.github.io/MaskMyPy/donut/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.6">
    
    
      
        <title>Donut Masking - MaskMyPy Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-is-donut-masking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MaskMyPy Documentation" class="md-header__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MaskMyPy Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Donut Masking
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MaskMyPy Documentation" class="md-nav__button md-logo" aria-label="MaskMyPy Documentation" data-md-component="logo">
      
  <img src="../assets/python_logo.png" alt="logo">

    </a>
    MaskMyPy Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Donut Masking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Donut Masking
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-donut-masking" class="md-nav__link">
    What is Donut Masking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    Example Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav" aria-label="Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut" class="md-nav__link">
    maskmypy.Donut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut_Multiply" class="md-nav__link">
    maskmypy.Donut_Multiply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut_K" class="md-nav__link">
    maskmypy.Donut_K
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../street/" class="md-nav__link">
        Street Masking
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Evaluation Tools
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-donut-masking" class="md-nav__link">
    What is Donut Masking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    Example Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav" aria-label="Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut" class="md-nav__link">
    maskmypy.Donut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut_Multiply" class="md-nav__link">
    maskmypy.Donut_Multiply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maskmypy.Donut_K" class="md-nav__link">
    maskmypy.Donut_K
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Donut Masking</h1>

<h2 id="what-is-donut-masking">What is Donut Masking<a class="headerlink" href="#what-is-donut-masking" title="Permanent link">&para;</a></h2>
<p>At its most basic, donut masking is an anonymization technique that works by randomly displacing each point between a specified minimum and maximum distance, as pictured below. This makes it a stronger form of random perturbation, which uses no minimum distance and thus runs the risk of insufficiently anonymizing points. MaskMyPy offers donut masking using the <a class="autorefs autorefs-internal" href="#maskmypy.Donut"><code>Donut</code></a> masking class.</p>
<p><img alt="Donut masking diagram" src="../assets/donutmasking.png" /></p>
<p>Donut masking can be further strengthened by adding some form of population data into the mix. As one can imagine, a point in a downtown core won't need to be displaced nearly as far as a point in the surrounding suburbs to achieve similar levels of anonymity. As such, MaskMyPy offers two additional donut masking classes to help take population density into account: <code>Donut_Multiply</code> and <code>Donut_K</code>. Both masks require a context layer of polygons containing population counts (e.g. census tracts), but leverage this information in different ways.</p>
<p><a class="autorefs autorefs-internal" href="#maskmypy.Donut_Multiply"><code>Donut_Multiply</code></a> works by multiplying masking distances based on the relative population density of the polygon it falls within. This means that points in the most dense areas of a given dataset will have their masking distance multiplied by 1, whereas points within the least dense areas of that same dataset will have their masking distance multiplied by 5. Of course, this multiplier is configurable, 5 is just the default.</p>
<p><a class="autorefs autorefs-internal" href="#maskmypy.Donut_K"><code>Donut_K</code></a> works a bit differently. Rather than taking a range of masking distances as input, <code>Donut_K</code> takes a desired level of anonymity as input, then figures out the masking distances that are required to achieve that. This level of anonymity is known as <em>k-anonymity</em>, and essentially refers to the size of crowd that the point (theoretically) blends into.</p>
<p>There is a caveat to these population-based methods, however: MaskMyPy is only able to factor in the population density of the immediate polygon that the point falls within. This means that if there are neighboring polygons with significantly different population densities, they will not be accounted for. Note that the <a href="/MaskMyPy/tools/#maskmypy.tools.estimate_k"><code>estimate_k</code></a> tool <em>will</em> do this disaggregation and will therefore return different, but more accurate values. So as always, be careful, understand your data, and validate that the masked data is sufficiently protected.</p>
<h2 id="example-usage">Example Usage<a class="headerlink" href="#example-usage" title="Permanent link">&para;</a></h2>
<p>To perform donut masking on a GeoDataFrame containing secret points with a range of 100 to 1000 meters:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">maskmypy</span> <span class="kn">import</span> <span class="n">Donut</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">donutmask</span> <span class="o">=</span> <span class="n">Donut</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">secret</span><span class="o">=</span><span class="n">my_secret_gdf</span><span class="p">,</span> <span class="c1"># Name of the secret GeoDataFrame.</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">min_distance</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="c1"># The minimum possible distance the points are displaced.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">max_distance</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span> <span class="c1"># The maximum possible distance that points are displaced.</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">donutmask</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># Execute the mask.</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">donutmask</span><span class="o">.</span><span class="n">mask</span> <span class="c1"># A masked GeoDataFrame.</span>
</code></pre></div>
<p>To perform more robust donut masking using census data to target a k-anonymity range, a containment layer to prevent points from being displaced to other counties, and a column describing the displacement distance of each point:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">maskmypy</span> <span class="kn">import</span> <span class="n">Donut_K</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">donutmask</span> <span class="o">=</span> <span class="n">Donut_K</span><span class="p">(</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">secret</span><span class="o">=</span><span class="n">my_secret_gdf</span><span class="p">,</span> <span class="c1"># Name of the secret GeoDataFrame</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">population</span><span class="o">=</span><span class="n">census_tracts</span><span class="p">,</span> <span class="c1"># Name of the GeoDataFrame containing population polygons.</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">pop_col</span><span class="o">=</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span> <span class="c1"># Name of the column containing the population field.</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="n">min_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="c1"># The minimum target k-anonymity value.</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">max_k</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="c1"># The maximum target k-anonymity value.</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">distribution</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">,</span> <span class="c1"># The distribution to use when displacing points.</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">container</span><span class="o">=</span><span class="n">county_polygons</span><span class="p">)</span> <span class="c1"># Optional, a GeoDataFrame used to ensure that points do not leave a particular area.</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">donutmask</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">displacement</span><span class="o">=</span><span class="n">true</span><span class="p">)</span> <span class="c1"># Execute the mask and add a column describing displacement distance.</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="n">masked</span> <span class="o">=</span> <span class="n">donutmask</span><span class="o">.</span><span class="n">mask</span>
</code></pre></div>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<div class="func-heading">maskmypy.Donut(secret)</div>


<div class="doc doc-object doc-class">


<a id="maskmypy.Donut"></a>
  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><span title="maskmypy.mask.Mask">Mask</span></code></p>


  
      <p>Constructs a donut masking class that (when run) anonymizes points by randomly
displacing them between a minimum and maximum distance.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret layer of points that require anonymization.
All other GeoDataFrame inputs must match the CRS of the secret point layer.</p>
      </li>
      <li class="field-body">
        <b>min_distance</b>
            (<code>int, float</code>)
        – <p>The minimum distance that points should be displaced. Default: <code>50</code>.</p>
      </li>
      <li class="field-body">
        <b>max_distance</b>
            (<code>int, float</code>)
        – <p>The maximum distance that points should be displaced. Default: <code>500</code>.</p>
      </li>
      <li class="field-body">
        <b>distribution</b>
            (<code>str, optional</code>)
        – <p>The distribution used to determine masking distances. The default <code>uniform</code> provides
a flat distribution where any value between the minimum and maximum distance is
equally likely to be selected. The <code>areal</code> distribution is more likely to select
distances that are further away. The <code>gaussian</code> distribution uses a normal
distribution, where values towards the middle of the range are most likely to be
selected. Note that gaussian distribution has a small chance of selecting values
beyond the defined minimum and maximum. Default: <code>uniform</code>.</p>
      </li>
      <li class="field-body">
        <b>padding</b>
            (<code>int, float, optional</code>)
        – <p>Context layers (e.g. population, address, container, street network) are
automatically cropped to the extent of the secret layer, plus some amount of padding
to reduce edge effects. By default, padding is set to one fifth the <em>x</em> or <em>y</em>
extent, whichever is larger. This parameter allows you to instead specify an exact
amount of padding to be added. Recommended if the extent of the secret layer is either
very small or very large. Units should match that of the secret layer's CRS.</p>
      </li>
      <li class="field-body">
        <b>max_tries</b>
            (<code>int, optional</code>)
        – <p>The maximum number of times that MaskMyPy should re-mask a point until it is
contained within the corresponding polygon (see <code>container</code> parameter). Default: <code>1000</code>.</p>
      </li>
      <li class="field-body">
        <b>seed</b>
            (<code>int, optional</code>)
        – <p>Used to seed the random number generator so that masks are reproducible.
In other words, given a certain seed, MaskMyPy will always mask data the exact same way.
If left unspecified, a seed is randomly selected using <code>SystemRandom</code></p>
      </li>
      <li class="field-body">
        <b>population</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A polygon layer with a column describing population count.</p>
      </li>
      <li class="field-body">
        <b>pop_col</b>
            (<code>str, optional</code>)
        – <p>The name of the population count column in the population polygon layer. Default: <code>pop</code>.</p>
      </li>
      <li class="field-body">
        <b>container</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing polygons within which intersecting secret points should remain
after masking. This works by masking a point, checking if it intersects
the same polygon prior to masking, and retrying until it does. The number of attempts
is controlled by the <code>max_tries</code> parameter. Useful for preserving statistical values,
such as from census tracts, or to ensure that points are not displaced into impossible
locations, such as the ocean.</p>
      </li>
      <li class="field-body">
        <b>address</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing address points.</p>
      </li>
  </ul>


  

  <div class="doc doc-children">











  </div>

  </div>

</div><hr />
<div class="func-heading">maskmypy.Donut_Multiply(secret)</div>


<div class="doc doc-object doc-class">


<a id="maskmypy.Donut_Multiply"></a>
  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="maskmypy.donut.Donut" href="#maskmypy.Donut">Donut</a></code></p>


  
      <p>Constructs a masking class that (when run) anonymizes points by randomly displacing
them according to a minimum and maximum distance, but with an additional multiplier
to help take population density into account. Points in the most population-dense polygons
will have their minimum and maximum masking distances multiplied by 1. This multiplier
will increase linearly as population density decreases, with points in the least
population-dense polygons having their minimum and maximum masking distances multiplied
by the full <code>population_mulitplier</code> value.</p>
<p>Requires a population layer.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret layer of points that require anonymization.
All other GeoDataFrame inputs must match the CRS of the secret point layer.</p>
      </li>
      <li class="field-body">
        <b>min_distance</b>
            (<code>int, float</code>)
        – <p>The minimum distance that points should be displaced.</p>
      </li>
      <li class="field-body">
        <b>max_distance</b>
            (<code>int, float</code>)
        – <p>The maximum distance that points should be displaced.</p>
      </li>
      <li class="field-body">
        <b>population_multiplier</b>
            (<code>int, float</code>)
        – <p>The maximum possible multiplier used to extend masking distances according to
population density.</p>
      </li>
      <li class="field-body">
        <b>padding</b>
            (<code>int, float, optional</code>)
        – <p>Context layers (e.g. population, address, container, street network) are
automatically cropped to the extent of the secret layer, plus some amount of padding
to reduce edge effects. By default, padding is set to one fifth the <em>x</em> or <em>y</em>
extent, whichever is larger. This parameter allows you to instead specify an exact
amount of padding to be added. Recommended if the extent of the secret layer is either
very small or very large. Units should match that of the secret layer's CRS.</p>
      </li>
      <li class="field-body">
        <b>max_tries</b>
            (<code>int, optional</code>)
        – <p>The maximum number of times that MaskMyPy should re-mask a point until it is
contained within the corresponding polygon (see <code>container</code> parameter). Default: <code>1000</code>.</p>
      </li>
      <li class="field-body">
        <b>seed</b>
            (<code>int, optional</code>)
        – <p>Used to seed the random number generator so that masks are reproducible.
In other words, given a certain seed, MaskMyPy will always mask data the exact same way.
If left unspecified, a seed is randomly selected using <code>SystemRandom</code></p>
      </li>
      <li class="field-body">
        <b>population</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A polygon layer with a column describing population count.</p>
      </li>
      <li class="field-body">
        <b>pop_col</b>
            (<code>str, optional</code>)
        – <p>The name of the population count column in the population polygon layer. Default: <code>pop</code>.</p>
      </li>
      <li class="field-body">
        <b>container</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing polygons within which intersecting secret points should remain
after masking. This works by masking a point, checking if it intersects
the same polygon prior to masking, and retrying until it does. The number of attempts
is controlled by the <code>max_tries</code> parameter. Useful for preserving statistical values,
such as from census tracts, or to ensure that points are not displaced into impossible
locations, such as the ocean.</p>
      </li>
      <li class="field-body">
        <b>address</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing address points.</p>
      </li>
  </ul>


  

  <div class="doc doc-children">











  </div>

  </div>

</div><hr />
<div class="func-heading">maskmypy.Donut_K(secret)</div>


<div class="doc doc-object doc-class">


<a id="maskmypy.Donut_K"></a>
  <div class="doc doc-contents first">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="maskmypy.donut.Donut" href="#maskmypy.Donut">Donut</a></code></p>


  
      <p>Constructs a masking class that (when run) anonymizes points by randomly displacing
them according to a desired k-anonymity range. Note that the k-anonymity values only
reflect the population density of the immediate polygon the point falls within,
and do not take into account any neighboring polygons.</p>
<p>Requires a population layer.</p>

  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>secret</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span></code>)
        – <p>Secret layer of points that require anonymization.
All other GeoDataFrame inputs must match the CRS of the secret point layer.</p>
      </li>
      <li class="field-body">
        <b>min_k</b>
            (<code>int</code>)
        – <p>The minimum desired k-anonymity for each point. Please read description above to learn
the limitations of this calculation.</p>
      </li>
      <li class="field-body">
        <b>max_k</b>
            (<code>int</code>)
        – <p>The maximum desired k-anonymity for each point. Please read description above to learn
the limitations of this calculation.</p>
      </li>
      <li class="field-body">
        <b>padding</b>
            (<code>int, float, optional</code>)
        – <p>Context layers (e.g. population, address, container, street network) are
automatically cropped to the extent of the secret layer, plus some amount of padding
to reduce edge effects. By default, padding is set to one fifth the <em>x</em> or <em>y</em>
extent, whichever is larger. This parameter allows you to instead specify an exact
amount of padding to be added. Recommended if the extent of the secret layer is either
very small or very large. Units should match that of the secret layer's CRS.</p>
      </li>
      <li class="field-body">
        <b>max_tries</b>
            (<code>int, optional</code>)
        – <p>The maximum number of times that MaskMyPy should re-mask a point until it is
contained within the corresponding polygon (see <code>container</code> parameter). Default: <code>1000</code>.</p>
      </li>
      <li class="field-body">
        <b>seed</b>
            (<code>int, optional</code>)
        – <p>Used to seed the random number generator so that masks are reproducible.
In other words, given a certain seed, MaskMyPy will always mask data the exact same way.
If left unspecified, a seed is randomly selected using <code>SystemRandom</code></p>
      </li>
      <li class="field-body">
        <b>population</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A polygon layer with a column describing population count.</p>
      </li>
      <li class="field-body">
        <b>pop_col</b>
            (<code>str, optional</code>)
        – <p>The name of the population count column in the population polygon layer. Default: <code>pop</code>.</p>
      </li>
      <li class="field-body">
        <b>container</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing polygons within which intersecting secret points should remain
after masking. This works by masking a point, checking if it intersects
the same polygon prior to masking, and retrying until it does. The number of attempts
is controlled by the <code>max_tries</code> parameter. Useful for preserving statistical values,
such as from census tracts, or to ensure that points are not displaced into impossible
locations, such as the ocean.</p>
      </li>
      <li class="field-body">
        <b>address</b>
            (<code><span title="geopandas.GeoDataFrame">GeoDataFrame</span>, optional</code>)
        – <p>A layer containing address points.</p>
      </li>
  </ul>


  

  <div class="doc doc-children">











  </div>

  </div>

</div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 7, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../street/" class="md-footer__link md-footer__link--next" aria-label="Next: Street Masking" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Street Masking
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>